$(function(){var e={months:["January","February","March","April","May","June","July","August","September","October","November","December"],errors:[],isFunction:function(e){return typeof e==="function"},load:function(){$(document).on("submit",".validatable",function(t){var n=$(this);var r=window[n.attr("submit")];if(r!=undefined&&e.isFunction(r))r(n);if(e.validate(n)){var i=window[n.attr("complete")];if(i!=undefined&&e.isFunction(i))i(n);if(n.hasClass("preventDefault"))t.preventDefault()}else{t.preventDefault();var s=window[n.attr("error")];if(s!=undefined&&e.isFunction(s))s(e.errors)}});$("select").each(function(){e.updateRange($(this))})},updateSelectorDays:function(e){if(!e instanceof jQuery)e=$(e);var t=e.parent(),n=t.children("[type=month]").first(),r=t.children("[type=year]").first(),i=(new Date(r.val(),n.val(),0)).getDate(),s=1;e.empty();while(s<i+1){$("<option/>").val(s+1).html(s).appendTo(e);s++}},parseRangeValue:function(e){return e=="year"?(new Date).getFullYear():parseInt(e)},updateRange:function(t){if(!t instanceof jQuery)t=$(t);var n=t.attr("range");if(n!=undefined){if(n=="months"){for(var r in e.months)$("<option/>").val(parseInt(r)+1).html(e.months[r]).appendTo(t);return}if(n=="days"){var i=t.parent(),s=function(){e.updateSelectorDays(t)};i.children("[type=month]").first().on("change",s);i.children("[type=year]").first().on("change",s);setTimeout(s,1)}var o=n.split("-",2),u=e.parseRangeValue(o[0]),a=e.parseRangeValue(o[1]);var f=u;if(u>a){while(f>a-1){$("<option/>").val(f).html(f).appendTo(t);f--}}else{while(f<a+1){$("<option/>").val(f).html(f).appendTo(t);f++}}}},validate:function(t){e.errors=[];t.find("input,textarea").each(function(){var t=$(this);e.validateField(t)});return e.errors.length==0},validateField:function(t,n){var r=t.attr("minlength"),i=t.attr("maxlength"),s=t.val(),o=s.length,u=e.isRequired(t);if(o==0){if(u)e.error(t,"required");else return}if(r!=undefined&&i!=undefined&&(o<r||o>i)){e.error(t,"both_length")}else{if(r!=undefined&&o<r)e.error(t,"min_length");if(i!=undefined&&o>i)e.error(t,"max_length")}var a=t.attr("validate");if(a!=undefined){if(a=="email"){if(s.match(/^\S+@\S+\.[a-zA-Z]+$/)==null)e.error(t,"invalid_email")}else if(a=="number"){if(s.match(/^[\d]+$/)==null)e.error(t,"invalid_number")}else{if(s.match(new RegExp(a))==null)e.error(t,"invalid")}}},isRequired:function(e){if(!e instanceof jQuery)e=$(e);var t=e.attr("required");return t!==undefined||t=="true"},error:function(t,n){if(e.errors[t]==undefined)e.errors[t]=[];e.errors[t].push(n)}};e.load()})